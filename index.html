<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Pollution Estimation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/geotiff@2.0.7/dist-browser/geotiff.js"></script>
    <script src="geotiff-loader.js"></script>
</head>
<body>
    <div class="app-container">
        <div class="map-container">
            <div id="map-view"></div>
            
            <!-- Floating Explanation Widget -->
            <div class="floating-widget explanation-widget">
                <button class="collapse-btn" id="explanation-collapse" aria-label="Collapse info panel">‹</button>
                <div class="collapsed-banner">
                    <span>Air Pollution Estimation</span>
                </div>
                <!-- Collapsed titles (visible when panel is collapsed) -->
                <div class="collapsed-titles">
                    <button class="collapsed-title-btn" data-slide="0">Introduction</button>
                    <button class="collapsed-title-btn" data-slide="1">Data Collection</button>
                    <button class="collapsed-title-btn" data-slide="2">Data set</button>
                    <button class="collapsed-title-btn" data-slide="3">Model</button>
                    <button class="collapsed-title-btn" data-slide="4">Results</button>
                    <button class="collapsed-title-btn" data-slide="5">Acknowledgements</button>
                </div>
                <div class="title-widget inline-title">
                    <h1>Air Pollution Estimation</h1>
                    <p class="subtitle">Interactive Map</p>
                </div>
                <div class="explanation-carousel">
                    <div class="carousel-container">
                        <div class="carousel-slide active">
                            <div class="slide-content">
                                <h2 class="slide-title">Introduction</h2>
                                <ul>
                                    <li>Building upon the NO₂ prediction model of Scheibenreif et al. (2022), this project introduces a deep learning framework for jointly estimating multiple pollutants (NO₂, SO₂, O₃, PM₁₀).</li>
                                    <li>By fusing low-resolution Sentinel-5P data with Sentinel-2 imagery and meteorological inputs, we aim to achieve a spatial resolution of 10 m with monthly temporal granularity.</li>
                                </ul>
                                <img src="images/simple_overview.png" alt="Model Overview" class="slide-image">
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <div class="slide-content">
                                <h2 class="slide-title">Data Collection</h2>
                                <ul>
                                    <li><strong>Ground Truth:</strong> 27 million daily aggregated pollutant concentrations were averaged for NO₂, SO₂, O₃, PM₁₀ for ~12'000 stations globally from 2018-2025</li>
                                    <li><strong>Meteorological:</strong> To account for atmospheric dispersion and seasonal effects, monthly meteorological data (e.g., wind speed, temperature) from the ERA5 dataset were integrated to the ground truths</li>
                                    <li><strong>Sentinel-2:</strong> One multispectral imagery (12 bands) from the best (least clouds) Sentinel-2 L2A image was acquired for every station per month.</li>
                                    <li><strong>Sentinel-5P:</strong> Daily swaths of Level-3 TROPOMI products for NO₂, SO₂, O₃, were aggregated into monthly medians</li>
                                </ul>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <div class="slide-content">
                                <h2 class="slide-title">Data set</h2>
                                <p>Page 3 content goes here. Add your third explanation or information section.</p>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <div class="slide-content">
                                <h2 class="slide-title">Model</h2>
                                <ul>
                                    <li>Multi-Task Framework: A supervised regression framework to jointly estimate all targets, leveraging physical correlations between pollutants.</li>
                                    <li>Simultaneous Prediction: A static multi-head regression block maps the shared representation to the five target concentrations.</li>
                                </ul>
                                <img src="images/full_model.png" alt="Full Model Architecture" class="slide-image">
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <div class="slide-content">
                                <h2 class="slide-title">Results</h2>
                                <p>Page 5 content goes here. Add your fifth explanation or information section.</p>
                            </div>
                        </div>
                        <div class="carousel-slide">
                            <div class="slide-content">
                            <h2 class="slide-title">Acknowledgements &amp; Authors</h2>
                                <div id="authors-slide"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-indicators">
                        <span class="indicator active" data-slide="0"></span>
                        <span class="indicator" data-slide="1"></span>
                        <span class="indicator" data-slide="2"></span>
                        <span class="indicator" data-slide="3"></span>
                        <span class="indicator" data-slide="4"></span>
                        <span class="indicator" data-slide="5"></span>
                    </div>
                </div>
            </div>
            
            <!-- Year/Month Slider Widget -->
            <div class="floating-widget time-selector-widget">
                <div class="time-selector-content">
                    <button id="pollutant-selector" class="year-selector-btn">NO2</button>
                    <button id="year-selector" class="year-selector-btn">2023</button>
                    <div class="month-slider-wrapper">
                        <input type="range" id="month-slider" class="month-slider" min="1" max="12" value="1" step="1">
                        <div class="month-slider-labels">
                            <span>Jan</span>
                            <span>Feb</span>
                            <span>Mar</span>
                            <span>Apr</span>
                            <span>May</span>
                            <span>Jun</span>
                            <span>Jul</span>
                            <span>Aug</span>
                            <span>Sep</span>
                            <span>Oct</span>
                            <span>Nov</span>
                            <span>Dec</span>
                        </div>
                    </div>
                </div>
            </div>
            
            
            <!-- Mobile Toggle Button -->
            <button id="mobile-toggle" class="mobile-toggle-btn">
                <span class="toggle-label" id="toggle-label">Info</span>
            </button>
            
            <!-- Info Popup Modal -->
            <div id="info-popup" class="info-popup hidden">
                <div class="info-popup-overlay"></div>
                <div class="info-popup-content">
                    <button class="info-popup-close">&times;</button>
                    <h2 class="info-popup-title">Information</h2>
                    <div class="info-popup-sections">
                        <div class="info-section">
                            <h3 class="info-section-title">GitHub Repository</h3>
                            <div id="github-content" class="info-section-content">
                                <p>Source code and documentation available on GitHub:</p>
                                <a href="https://github.com/yourusername/air-pollution-estimation" target="_blank" rel="noopener noreferrer" class="info-link">github.com/yourusername/air-pollution-estimation</a>
                            </div>
                        </div>
                        <div class="info-section">
                            <h3 class="info-section-title">Additional Information</h3>
                            <div id="additional-content" class="info-section-content">
                                <p><strong>Data Sources:</strong> Satellite imagery from Sentinel-5P, ground-based monitoring stations, and meteorological data.</p>
                                <p><strong>Methodology:</strong> Machine learning model trained on historical air quality data and satellite observations.</p>
                                <p><strong>Contact:</strong> For questions or collaboration, please reach out via GitHub or email at your.email@example.com</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Floating Feature Info Widget -->
            <div id="feature-info" class="floating-widget feature-widget hidden">
                <h2>Feature Details</h2>
                <div id="feature-content"></div>
            </div>
            
            <!-- Image Popup Modal -->
            <div id="image-popup" class="image-popup hidden">
                <div class="popup-overlay"></div>
                <div class="popup-content">
                    <button class="popup-close">&times;</button>
                    <img src="images/geological_domains.jpg" alt="Geological Domains">
                    <div class="popup-reference">
                        Guido Pastore et al. 2021 - <a href="https://www.sciencedirect.com/science/article/pii/S0012825221001069#f0015" target="_blank" rel="noopener noreferrer">Reference</a>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Info Panel (slides up from bottom - OUTSIDE tab switcher) -->
            <div class="mobile-info-panel" id="mobile-info-panel">
                <div class="mobile-info-panel-content">
                    <h1 class="mobile-info-title">Air Pollution Estimation</h1>
                    <p class="mobile-info-subtitle"></p>
                    <div class="mobile-info-carousel">
                        <div class="mobile-info-carousel-container">
                            <div class="mobile-info-slide active">
                                <h2 class="mobile-info-slide-title">Introduction</h2>
                                <ul>
                                    <li>Building upon the NO₂ prediction model of Scheibenreif et al. (2022), this project introduces a deep learning framework for jointly estimating multiple pollutants (NO₂, SO₂, O₃, PM₁₀).</li>
                                    <li>By fusing low-resolution Sentinel-5P data with Sentinel-2 imagery and meteorological inputs, we aim to achieve a spatial resolution of 10 m with monthly temporal granularity.</li>
                                </ul>
                                <img src="images/simple_overview.png" alt="Model Overview" class="slide-image">
                            </div>
                            <div class="mobile-info-slide">
                                <h2 class="mobile-info-slide-title">Data Collection</h2>
                                <ul>
                                    <li><strong>Ground Truth:</strong> 27 million daily aggregated pollutant concentrations were averaged for NO₂, SO₂, O₃, PM₁₀ for ~12'000 stations globally from 2018-2025</li>
                                    <li><strong>Meteorological:</strong> To account for atmospheric dispersion and seasonal effects, monthly meteorological data (e.g., wind speed, temperature) from the ERA5 dataset were integrated to the ground truths</li>
                                    <li><strong>Sentinel-2:</strong> One multispectral imagery (12 bands) from the best (least clouds) Sentinel-2 L2A image was acquired for every station per month.</li>
                                    <li><strong>Sentinel-5P:</strong> Daily swaths of Level-3 TROPOMI products for NO₂, SO₂, O₃, were aggregated into monthly medians</li>
                                </ul>
                            </div>
                            <div class="mobile-info-slide">
                                <h2 class="mobile-info-slide-title">Data set</h2>
                                <p>Page 3 content goes here. Add your third explanation or information section.</p>
                            </div>
                            <div class="mobile-info-slide">
                                <h2 class="mobile-info-slide-title">Model</h2>
                                <ul>
                                    <li>Multi-Task Framework: A supervised regression framework to jointly estimate all targets, leveraging physical correlations between pollutants.</li>
                                    <li>Simultaneous Prediction: A static multi-head regression block maps the shared representation to the five target concentrations.</li>
                                </ul>
                                <img src="images/full_model.png" alt="Full Model Architecture" class="slide-image">
                            </div>
                            <div class="mobile-info-slide">
                                <h2 class="mobile-info-slide-title">Results</h2>
                                <p>Page 5 content goes here. Add your fifth explanation or information section.</p>
                            </div>
                            <div class="mobile-info-slide">
                                <h2 class="mobile-info-slide-title">Acknowledgements &amp; Authors</h2>
                                <div id="authors-mobile"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Indicators fixed at bottom of panel -->
                <div class="mobile-info-carousel-indicators">
                    <span class="mobile-info-indicator active" data-slide="0"></span>
                    <span class="mobile-info-indicator" data-slide="1"></span>
                    <span class="mobile-info-indicator" data-slide="2"></span>
                    <span class="mobile-info-indicator" data-slide="3"></span>
                    <span class="mobile-info-indicator" data-slide="4"></span>
                    <span class="mobile-info-indicator" data-slide="5"></span>
                </div>
            </div>
            
            <!-- Mobile Tab Switcher (only visible on mobile) -->
            <div class="mobile-tab-switcher" id="mobile-tab-switcher">
                <!-- Color Bar Legend - at top of widget -->
                <div class="mobile-colorbar" id="mobile-colorbar">
                    <span class="colorbar-unit">µg/m³ </span>
                    <span class="colorbar-value colorbar-min" id="colorbar-min">0</span>
                    <div class="colorbar-gradient"></div>
                    <span class="colorbar-value colorbar-max" id="colorbar-max">50</span>
                </div>
                <!-- Month Selector (shown when Predictions tab is active) -->
                <div class="mobile-month-selector">
                    <div class="mobile-month-selector-content">
                        <div class="mobile-controls-row">
                            <button class="mobile-control-btn" id="mobile-pollutant-btn">NO2</button>
                            <button class="mobile-control-btn" id="mobile-year-btn">2023</button>
                        </div>
                        <div class="mobile-month-slider-wrapper">
                            <input type="range" id="mobile-month-slider" class="mobile-month-slider" min="1" max="12" value="1" step="1">
                            <div class="mobile-month-slider-labels">
                                <span>Jan</span>
                                <span>Feb</span>
                                <span>Mar</span>
                                <span>Apr</span>
                                <span>May</span>
                                <span>Jun</span>
                                <span>Jul</span>
                                <span>Aug</span>
                                <span>Sep</span>
                                <span>Oct</span>
                                <span>Nov</span>
                                <span>Dec</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mobile-tab-slider">
                    <div class="mobile-tab-track">
                        <button class="mobile-tab active" data-tab="predictions">Predictions</button>
                        <button class="mobile-tab" data-tab="info">Info</button>
                    </div>
                    <div class="mobile-tab-indicator"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>

